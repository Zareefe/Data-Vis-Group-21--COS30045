<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Jurisdiction Analysis ‚Äì Mobile Phone Use Enforcement</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="css/visual.css" />
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>

<body>
  <header class="site-header">
    <div class="site-header__top">
      <div class="site-header__brand">
        <div class="brand-line-1">AUSTRALIAN TRANSPORT STATISTICS</div>
        <div class="brand-line-2">Mobile phone use ‚Äì detailed view</div>
      </div>
    </div>
    <nav class="topnav">
      <a href="index.html" class="topnav__link">Overview</a>
      <a href="jurisdiction.html" class="topnav__link topnav__link--active">Jurisdiction</a>
      <a href="trend.html" class="topnav__link">Trend</a>
    </nav>
  </header>

  <main id="jurisdiction-page" class="page page--jurisdiction">
    <section class="page-inner single-column">

      <!-- üîµ ORIGINAL SECTION (Enhanced Layout) -->
      <section class="card jurisdiction-hero">
        <h1 class="section-heading">üìç Offences by Jurisdiction</h1>
        <p class="section-intro">
          Compare mobile phone enforcement patterns across Australian states and territories. 
          Filter by year and detection method to explore regional differences.
        </p>

        <!-- Filters -->
        <div class="filters-bar filters-bar--inline">
          <div class="filter-block">
            <label for="juYearFilter">Year</label>
            <select id="juYearFilter">
              <option value="All">All years</option>
            </select>
          </div>

          <div class="filter-block">
            <label for="juMethodFilter">Detection method</label>
            <select id="juMethodFilter">
              <option value="All">All methods</option>
            </select>
          </div>

          <div class="filter-block filter-block--reset">
            <button id="juResetBtn" type="button">Reset filters</button>
          </div>
        </div>

        <!-- Main chart -->
        <div class="chart-block">
          <div class="chart-block__header">
            <h2 class="card-title">Total Offences per Jurisdiction</h2>
            <p class="chart-description">
              Total mobile phone fines by jurisdiction for the selected year and detection method.
              Use this view to identify states and territories with higher enforcement activity.
            </p>
          </div>

          <div id="juJurisdictionChart" class="chart-container chart-container--wide"></div>

          <div class="legend legend--states">
            <span class="legend-label">Jurisdictions:</span>
            <span class="legend-swatch legend-nsw">NSW</span>
            <span class="legend-swatch legend-vic">VIC</span>
            <span class="legend-swatch legend-qld">QLD</span>
            <span class="legend-swatch legend-wa">WA</span>
            <span class="legend-swatch legend-sa">SA</span>
            <span class="legend-swatch legend-tas">TAS</span>
            <span class="legend-swatch legend-act">ACT</span>
            <span class="legend-swatch legend-nt">NT</span>
          </div>

          <div class="insight-panel">
            <h3>üí° Insight</h3>
            <p id="juInsightText">
              Hover over each bar to see the exact number of fines. Higher bars indicate
              jurisdictions with more mobile phone enforcement activity for the selected filters.
            </p>
          </div>
        </div>
      </section>

      <!-- üéØ KNIME ANALYSIS SECTION -->
      <section class="card knime-analysis-header">
        <h2 class="section-heading">üìä Advanced KNIME Analysis</h2>
        <p class="section-intro">
          Deep dive into jurisdiction-level patterns using advanced data processing workflows. 
          These visualizations reveal normalized rates and detection method distributions.
        </p>
      </section>

      <!-- üîµ Q1: Rate Per 10,000 Licences -->
      <section class="card knime-feature-card">
        <div class="knime-feature-header">
          <div>
            <h2 class="card-title">Q1 ‚Äì Normalized Offence Rate</h2>
            <span class="knime-badge knime-badge--rate">Per 10k Licences</span>
          </div>
          <div class="knime-meta">
            <span class="knime-source">üìÅ Source: Q1_per10000.csv</span>
            <span class="knime-timeframe">üóìÔ∏è 2010-2014</span>
          </div>
        </div>
        
        <p class="chart-description">
          This chart normalizes offence counts by dividing by licence holders (per 10,000), 
          providing a fair comparison across jurisdictions of different sizes. Use the year filter 
          to explore trends over time or view the average across all years. Higher rates 
          indicate more enforcement activity relative to population.
        </p>
        
        <div id="knime-q1-rate" class="chart-container knime-chart-enhanced"></div>
        
        <div class="knime-insight">
          <strong>üîç Key Finding:</strong> Normalized rates reveal that smaller jurisdictions 
          often have proportionally higher enforcement rates than raw offence counts suggest. 
          Use the year selector above to identify temporal patterns and policy changes.
        </div>
      </section>

      <!-- üîµ Q4: Detection Method Analysis -->
      <section class="card knime-feature-card">
        <div class="knime-feature-header">
          <div>
            <h2 class="card-title">Q4 ‚Äì Detection Method Breakdown</h2>
            <span class="knime-badge knime-badge--method">Method Distribution</span>
          </div>
          <div class="knime-meta">
            <span class="knime-source">üìÅ Source: Q4_detection.csv</span>
          </div>
        </div>
        
        <p class="chart-description">
          Analyze how each jurisdiction relies on different detection methods: fixed cameras, 
          mobile cameras, on-road police enforcement, and other methods. The stacked bars show 
          the composition of enforcement strategies.
        </p>
        
        <div id="knime-q4-detection" class="chart-container chart-container--wide knime-chart-enhanced"></div>

        <div class="knime-dual-charts">
          <div class="knime-chart-section">
            <h3 class="card-title">Overall Method Distribution</h3>
            <p class="chart-description mini">Aggregate view across all jurisdictions</p>
            <div id="knime-q4-pie" class="chart-container knime-chart-compact"></div>
          </div>
          
          <div class="knime-insights-section">
            <h3 class="card-title">üìå Key Observations</h3>
            <ul class="knime-observations">
              <li><strong>Camera dominance:</strong> Most jurisdictions rely heavily on automated detection</li>
              <li><strong>Regional variance:</strong> Method mix varies significantly by state enforcement policy</li>
              <li><strong>Technology adoption:</strong> Newer jurisdictions show higher camera usage rates</li>
            </ul>
          </div>
        </div>

        <div class="knime-insight">
          <strong>üí° Analysis Tip:</strong> Compare the stacked bars to understand which states 
          prioritize technology (cameras) versus traditional enforcement (on-road police).
        </div>
      </section>

      <!-- üîó Call to Action -->
      <section class="card knime-cta-card">
        <h3>üî¨ Explore More Analysis</h3>
        <p>
          Want to see temporal trends and COVID-19 impact? Check out the 
          <a href="trend.html" class="knime-link">Trend Analysis page</a> for time-series 
          visualizations and pandemic-related insights.
        </p>
      </section>

    </section>
  </main>

  <footer class="site-footer">
    <p>Data source: BITRE police enforcement fines dataset. KNIME processing applied for Q1 and Q4 research questions.</p>
  </footer>

  <!-- ORIGINAL SCRIPTS -->
  <script src="js/utils.js"></script>
  <script src="js/chart_age.js"></script>
  <script src="js/chart_jurisdiction.js"></script>
  <script src="js/chart_month.js"></script>
  <script src="js/chart_trend.js"></script>
  <script src="js/main.js"></script>

  <!-- KNIME SCRIPTS -->
  <script src="js/utils_knime.js"></script>
  <script src="js/chart_q1_rate.js"></script>
  <script src="js/chart_detection.js"></script>
  <script src="js/main_knime.js"></script>
</body>
</html>